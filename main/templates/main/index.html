{% extends "main/base.html" %}
{% load static %}
{% load carts_tags %}

{% block content %}

{% for block, block_type in blocks %}
  {% if block_type == 'text' %}
    <div class="text-center mb_3_8 mb-lg_6">
      <h1>{{ block.title }}</h1>
      <p>{{ block.text }}</p>
    </div>

  {% elif block_type == 'content' %}
    <div class="product_{{ block.alignment }} mb_2_8 mb-lg_5">
      <div class="collection_name mb-4">{{ block.title }}</div>
      <div class="row flex-column flex-lg-row justify-content-lg-between">
        <div class="col-12 col-lg-8 mb-4 mb-lg-0 collection_slider_block">
          <div id="carousel{{ block.id }}" class="carousel slide">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#carousel{{ block.id }}" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
              <button type="button" data-bs-target="#carousel{{ block.id }}" data-bs-slide-to="1" aria-label="Slide 2"></button>
              <button type="button" data-bs-target="#carousel{{ block.id }}" data-bs-slide-to="2" aria-label="Slide 3"></button>
            </div>

            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="{{ block.image1.url }}" class="d-block w-100" alt="">
              </div>
              <div class="carousel-item">
                <img src={% static "images/product-slide2.jpg" %} class="d-block w-100" alt="">
              </div>
              <div class="carousel-item">
                <img src={% static "images/product-slide.jpg" %} class="d-block w-100" alt="">
              </div>
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#carousel{{ block.id }}" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Предыдущий</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carousel{{ block.id }}" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Следующий</span>
            </button>
            
          </div>
        </div>

        <div class="d-flex d-lg-block justify-content-between col-12 col-lg-4 px-0 product_aside">
          <div class="product_item w-48 w-lg-100 mb-lg-3">
            <div class="product_item_img">
              <a href="{% url "goods:product" block.product1.slug %}">
                {% if block.product1.image %}
                  <img class="first_img" src="{{ block.product1.image.url }}" class="d-block w-100" alt="{{ block.product1.name }}">
                  <img class="second_img" src={% static "images/product-left2.jpg" %} class="d-block w-100" alt="{{ block.product1.name }}">
            
                {% else %}
                  <img class="first_img" src={% static "images/product-left.jpg" %} class="d-block w-100" alt="No Product Image">
                  <img class="second_img" src={% static "images/product-left2.jpg" %} class="d-block w-100" alt="No Product Image">

                {% endif %}
              </a>
            </div>
            <div class="product_item_info">
              <a class="py-2 py-lg-4" href="{% url "goods:product" block.product1.slug %}">
                <div class="product_item_name">{{ block.product1.name }}</div>
                  {% if block.product1.discount_price %}
                    <div class="product_item_price">
                        <div class="price_old">{{ block.product1.price }} &#8381;</div>
                        <div>{{ block.product1.discount_price }} &#8381;</div>
                    </div>

                  {% else %}
                    <div class="product_item_price">{{ block.product1.price }} &#8381;</div>
                  
                  {% endif %}
              </a>
            </div>
          </div>

          <div class="product_item w-48 w-lg-100">
            <div class="product_item_img">
              <a href="{% url "goods:product" block.product2.slug %}">
                {% if block.product2.image %}
                  <img class="first_img" src="{{ block.product2.image.url }}" class="d-block w-100" alt="{{ block.product2.name }}">
                  <img class="second_img" src={% static "images/product-left2.jpg" %} class="d-block w-100" alt="{{ block.product2.name }}">
            
                {% else %}
                  <img class="first_img" src={% static "images/product-left.jpg" %} class="d-block w-100" alt="No Product Image">
                  <img class="second_img" src={% static "images/product-left2.jpg" %} class="d-block w-100" alt="No Product Image">

                {% endif %}
              </a>
            </div>
            <div class="product_item_info">
              <a class="py-2 py-lg-4" href="{% url "goods:product" block.product2.slug %}">
                <div class="product_item_name">{{ block.product2.name }}</div>
                  {% if block.product2.discount_price %}
                  <div class="product_item_price">
                      <div class="price_old">{{ block.product2.price }} &#8381;</div>
                      <div>{{ block.product2.discount_price }} &#8381;</div>
                  </div>

                  {% else %}
                    <div class="product_item_price">{{ block.product2.price }} &#8381;</div>
                
                  {% endif %}
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

  {% endif %}
{% endfor %}

{% endblock  %}
