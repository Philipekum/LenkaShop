{% extends "main/base.html" %}
{% load static %}

{% block content %}

<div class="row flex-wrap product_list">
    {% for product in products %}
    
    <div class="product_item col-6 col-lg-4 mb-lg-2">
        <div class="product_item_img">
            <a href="{% url "catalog:product" product.slug %}">
                {% if product.image %}
                    <img class="first_img" src="{{ product.image.url }}" class="d-block w-100" alt="{{ product.name }}">
                    <img class="second_img" src={% static "images/product-left2.jpg" %} class="d-block w-100" alt="{{ product.name }}">
                
                {% else %}
                    <img class="first_img" src={% static "images/product-left.jpg" %} class="d-block w-100" alt="No Product Image">
                    <img class="second_img" src={% static "images/product-left2.jpg" %} class="d-block w-100" alt="No Product Image">

                {% endif %}
            </a>
        </div>

        <div class="product_item_info">
            <a class="py-2 py-lg-4" href="{% url "catalog:product" product.slug %}">
                <div class="product_item_name">{{ product.name }}</div>

                {% if product.discount_price %}
                    <div class="product_item_price">
                        <div class="price_old">{{ product.price }} &#8381;</div>
                        <div>{{ product.discount_price }} &#8381;</div>
                    </div>

                {% else %}
                    <div class="product_item_price">{{ product.price }} &#8381;</div>
                
                {% endif %}
            </a>
        </div>
    </div>

    {% endfor %}

    {% if products.has_other_pages %}
        <nav>
            <ul class="pagination justify-content-center">
                {% for page in products.paginator.page_range %}
                    {% if page >= products.number|add:-2 and page <= products.number|add:2 %}
                        <li class="page-item {% if products.number == page %}active{% endif %}" aria-current="page">
                            <a class="page-link" href="?page={{ page }}">{{ page }}</a>
                        </li>           
                    {% endif %}
                {% endfor %}
            </ul>
        </nav>
    {% endif %}

{% endblock %}
